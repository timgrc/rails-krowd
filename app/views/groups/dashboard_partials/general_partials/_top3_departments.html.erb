<canvas id="top3_departments_bars"></canvas>
<% content_for :departments_bars_js do %>
  <script>
    var ctx = document.getElementById("top3_departments_bars").getContext("2d");
    var data = {
      // labels: ["tim","tom","tum"],
      labels: <%= raw KpiDash.new(@group, 'top3_departments_labels').call.to_json %>,
      datasets: [
        {
          label: "Active members by department",
          backgroundColor: [
            'rgba(33,47,59, 0.7)',
            'rgba(255,112,166, 0.7)',
            'rgba(255, 206, 86, 0.7)',
          ],
          borderColor: [
            'rgba(33,47,59,1)',
            'rgba(255,112,166, 1)',
            'rgba(255, 206, 86, 1)',
          ],
          borderWidth: 1,
          data: <%= KpiDash.new(@group, 'top3_departments_data').call %>,
        }
      ]
    };

    var myBarChart = new Chart(ctx, {
        type: 'bar',
        data: data,
        options: {
          maintainAspectRatio: false,
          responsive: true,
          legend: {
            display: false,
            labels: {
                display: false
            }
          },
          scales: {
            yAxes: [{
              labels: {
                display: false,
                fontColor: 'white',
                fontSize: 15
              },
              barThickness: 50,
              ticks: {
                beginAtZero:true,
                fontColor: 'white',
                fontSize: 15
              }
            }],
            xAxes: [{
              barThickness: 50,
              ticks: {
                beginAtZero:true,
                fontColor: 'white',
                fontSize: 15
              }
            }]
          }
        }
    });
  </script>
<% end %>

<!-- <style>
  svg {
    fill: linear-gradient(#133c55, #36AD7E);
    z-index: 10;
    width: 100px;
    height: 100px;
  }
</style> -->

<div style="
  margin:   auto;
  width:    220px;
  height:   220px;
  position: relative;
">
  <div style="
    position: absolute;
    display:         flex;
    flex-direction:  column;
    align-items:     center;
    justify-content: center;
    width:  100%;
    height: 100%;
  ">
    <div class="donut-title text-center"><%= KpiDash.new(@group, 'members_ratio').call %> %</div>
    <div class="donut-subtitle text-center"><strong><%= KpiDash.new(@group, 'members_active').call %></strong> ACTIVE MEMBERS</div>
  </div>
  <canvas id="retention-rate" style="
    width:  100%;
    height: 100%;
  "></canvas>
</div>

<% content_for :charts_js do %>
  <script>
    var ctx = document.getElementById("retention-rate").getContext("2d");
    var gradient = ctx.createLinearGradient(0, 0, 200, 0);
    gradient.addColorStop(0, '#36AD7E');
    gradient.addColorStop(1, '#5BC5F1');

    var myChart = new Chart(ctx, {
      type: 'doughnut',
      data: {
        labels: [
        'active',
        'inactive'
        ],
        datasets: [{
            // label: '# of Votes',
            data: <%= KpiDash.new(@group, 'members').call %>,
            backgroundColor: [
            gradient,
            '#0B1B28'
            ],
            borderWidth: 0,
        }]
      },
      options: {
        cutoutPercentage: 93,
        legend: { display: false }
      }
    });
  </script>
<% end %>

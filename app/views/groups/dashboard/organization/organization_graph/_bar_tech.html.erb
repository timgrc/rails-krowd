<canvas id="tech-bars"></canvas>
<%= content_for :business_bars_js do %>
  <script>
    var ctx = document.getElementById("tech-bars").getContext("2d");
    var gradient = ctx.createLinearGradient(0, 0, 200, 0);
    gradient.addColorStop(0, '#36AD7E');
    gradient.addColorStop(1, '#5BC5F1');

    var data = {
        labels: ["Post4", "Post14", "Post15", "Post22"],
        datasets: [
          {
              backgroundColor: [
                  'rgba(46, 134, 171, 0.2)',
                  'rgba(46, 134, 171, 0.2)',
                  'rgba(46, 134, 171, 0.2)',
                  'rgba(46, 134, 171, 0.2)'
              ],
              borderColor: [
                  'rgba(54, 162, 235, 1)',
                  'rgba(54, 162, 235, 1)',
                  'rgba(54, 162, 235, 1)',
                  'rgba(54, 162, 235, 1)'
              ],
              borderWidth: 1,
              data: <%= KpiDash.new(@group, 'organisation_business').call[:countries] %>,
          },
          {
              backgroundColor: [
                  'rgba(91, 197, 241, 0.4)',
                  'rgba(91, 197, 241, 0.4)',
                  'rgba(91, 197, 241, 0.4)',
                  'rgba(91, 197, 241, 0.4)'
              ],
              borderColor: [
                  'rgba(54, 162, 235, 1)',
                  'rgba(54, 162, 235, 1)',
                  'rgba(54, 162, 235, 1)',
                  'rgba(54, 162, 235, 1)'
              ],
              borderWidth: 1,
              data: <%= KpiDash.new(@group, 'organisation_business').call[:departments] %>,
          }
        ]
    };

    var myBarChart = new Chart(ctx, {
        type: 'bar',
        data: data,
        options: {
          scales: {
          xAxes: [{
              ticks: {
                  beginAtZero:true,
                  fontFamily: "'Open Sans Bold', sans-serif",
                  fontSize:11
              },
              scaleLabel:{
                  display:false
              },
              gridLines: {
              },
              stacked: true
          }],
          yAxes: [{
              gridLines: {
                  display:false,
                  color: "#fff",
                  zeroLineColor: "#fff",
                  zeroLineWidth: 0
              },
              ticks: {
                  fontFamily: "'Open Sans Bold', sans-serif",
                  fontSize:11
              },
              stacked: true
          }]
        },
        legend:{
            display:false
        }
      }
    });
  </script>
<% end %>
